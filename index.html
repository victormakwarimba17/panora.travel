<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PANORA - Zimbabwe's Premier Travel Platform</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap');
        * { box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; }
        .hero-font { font-family: 'Playfair Display', serif; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .scale-in { animation: scaleIn 0.2s ease-out; }
        @keyframes scaleIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .slide-in { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .line-clamp-1 { overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 1; }
        .line-clamp-2 { overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; }
        .backdrop-blur-md { backdrop-filter: blur(12px); }
        .shadow-soft { box-shadow: 0 8px 30px rgba(0,0,0,0.08); }
        .shadow-deep { box-shadow: 0 20px 60px rgba(0,0,0,0.15); }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); cursor: pointer; }
        .dark input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(0); }
        .gradient-bg { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
        .gradient-text { background: linear-gradient(135deg, #f59e0b, #d97706); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .blob { position: absolute; border-radius: 50%; filter: blur(40px); opacity: 0.2; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-8px); box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25); }
        .glass { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .dark .glass { background: rgba(0, 0, 0, 0.2); }
        .animate-pulse-slow { animation: pulse 3s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .animate-float { animation: float 6s ease-in-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
        .animate-glow { animation: glow 2s ease-in-out infinite alternate; }
        @keyframes glow { from { box-shadow: 0 0 10px #f59e0b; } to { box-shadow: 0 0 20px #f59e0b; } }
        .prose { color: #374151; }
        .dark .prose { color: #d1d5db; }
        .prose h3 { font-size: 1.5rem; font-weight: 700; margin-bottom: 1rem; color: #111827; }
        .dark .prose h3 { color: #f9fafb; }
        .prose p { line-height: 1.75; margin-bottom: 1rem; }
        .sticky-nav { position: sticky; top: 0; z-index: 100; }
        .parallax { background-attachment: fixed; background-position: center; background-repeat: no-repeat; background-size: cover; }
        .text-balance { text-wrap: balance; }
        .clip-path-polygon { clip-path: polygon(0 0, 100% 0, 100% 85%, 0 100%); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .transition-all-smooth { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="bg-[#FAFAF9] dark:bg-slate-950 transition-colors duration-500">
    <!-- Root Container -->
    <div id="root"></div>

    <!-- Application Script -->
    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // ====================
        // STATE MANAGEMENT
        // ====================
        const state = {
            currentView: 'home',
            theme: 'dark',
            language: 'en',
            searchParams: {},
            authModalOpen: false,
            listings: [
                { id: 1, title: "The Residency at Leopard Rock", province: "Manicaland", location: "Vumba Mountains", price: 180, rating: 4.92, image: "https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&q=80&w=1000", category: "Resorts", type: "stay", amenities: ["Wifi", "Pool", "Spa"], isOpen: true, description: "A luxurious escape in the misty Vumba mountains, perfect for romance and relaxation. Enjoy world-class golf and fine dining." },
                { id: 2, title: "Zambezi River Eco-Lodge", province: "Matabeleland North", location: "Victoria Falls", price: 320, rating: 4.98, image: "https://images.unsplash.com/photo-1493246507139-91e8fad9978e?auto=format&fit=crop&q=80&w=1000", category: "Camps", type: "stay", amenities: ["Wifi", "Safari", "River View"], isOpen: true, description: "Eco-friendly luxury right on the banks of the mighty Zambezi River. Sleep to the sound of hippos and wake up to elephants." },
                { id: 3, title: "Amanzi Restaurant Deck", province: "Harare", location: "Harare", price: 45, rating: 4.85, image: "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?auto=format&fit=crop&q=80&w=1000", category: "Restaurants", type: "culinary", amenities: ["Bar", "Live Music"], isOpen: true, description: "The best dining experience in Harare with beautiful garden views and an award-winning menu." },
                { id: 4, title: "Granite Stone Camp", province: "Matabeleland South", location: "Matobo Hills", price: 150, rating: 4.95, image: "https://images.unsplash.com/photo-1510798831971-661eb04b3739?auto=format&fit=crop&q=80&w=1000", category: "Camps", type: "camping", amenities: ["Hiking", "Fireplace"], isOpen: false, description: "Nestled among the balancing rocks of Matobo, a UNESCO world heritage site. Perfect for history buffs and nature lovers." },
                { id: 5, title: "Kariba Houseboat Luxury", province: "Mashonaland West", location: "Lake Kariba", price: 400, rating: 4.90, image: "https://images.unsplash.com/photo-1544551763-46a8e3d69958?auto=format&fit=crop&q=80&w=1000", category: "Houseboats", type: "cruise", amenities: ["Chef", "Fishing"], isOpen: true, description: "Explore the vast Lake Kariba in style with your own private chef and crew. Catch tiger fish by day and stargaze by night." },
                { id: 6, title: "Nyanga Pine Cabin", province: "Manicaland", location: "Nyanga", price: 90, rating: 4.75, image: "https://images.unsplash.com/photo-1449156493391-d2cfa28e468b?auto=format&fit=crop&q=80&w=1000", category: "Picnic Areas", type: "stay", amenities: ["Self Catering", "Mountain View"], isOpen: true, description: "Cozy log cabins surrounded by pine forests and waterfalls. The ultimate winter getaway in Zimbabwe." },
            ],
            cart: [],
            partnerDashboardTab: 'listings',
            isAddingProperty: false,
            newProperty: { title: '', price: '', province: 'Harare', category: 'Lodge' },
            aiTripPlannerQuery: '',
            aiTripIdea: null,
            aiLoading: false,
            provinces: ["Harare", "Bulawayo", "Manicaland", "Mashonaland Central", "Mashonaland East", "Mashonaland West", "Masvingo", "Matabeleland North", "Matabeleland South", "Midlands"],
            adventureTypes: [
                { icon: 'â›º', name: "Safari & Camping", slug: "camping", desc: "Experience the wild heart of Zimbabwe." },
                { icon: 'ðŸš¤', name: "River Cruise", slug: "cruise", desc: "Sunset cruises on the Zambezi." },
                { icon: 'â›°ï¸', name: "Hiking & Trekking", slug: "hiking", desc: "Conquer the misty peaks." },
                { icon: 'ðŸ½ï¸', name: "Culinary", slug: "culinary", desc: "Taste local flavors." },
                { icon: 'ðŸŽµ', name: "Festivals", slug: "events", desc: "Vibrant local culture." },
                { icon: 'ðŸ“¸', name: "Photography", slug: "photo", desc: "Capture breathtaking landscapes." },
            ],
            translations: {
                en: { heroTitle: "Stay Better. Explore Deeper.", subTitle: "Experience Zimbabwe.", search: "Search", explore: "Explore", stays: "Stays", adventures: "Adventures", login: "Sign In / Join", hosting: "Become a Host", reviews: "Reviews", blog: "Blog", seasonal: "Best destinations for every season", adventuresTitle: "Adventures around Zimbabwe", whyPanoraTitle: "Why Panora?", whyPanoraSub: "Book with Confidence", toursTitle: "Book the Best Tours & Safaris", toursBody: "Panora makes exploring and booking organized adventures effortless.", fingertipsTitle: "Adventure at Your Fingertips", fingertipsBody: "We put Zimbabwe in your pocket.", seasonalSpring: "Spring Blossoms", seasonalSummer: "Summer Sunsets", seasonalAutumn: "Autumn Hues", seasonalWinter: "Winter Safaris", viewAllRegions: "View All Regions", viewAllCollections: "View All Collections" },
                sn: { heroTitle: "Gara Zvirinani.", subTitle: "Inzwa Zimbabwe.", search: "Tsvaga", explore: "Ongorora", stays: "Dzimba", adventures: "Zviitiko", login: "Pinda", hosting: "Iva Muteveri", reviews: "Miongororo", blog: "Blog", seasonal: "Nzvimbo Dzakanakisisa", adventuresTitle: "Zviitiko", whyPanoraTitle: "Sei Panora?", whyPanoraSub: "Bhuka Nechivimbo", toursTitle: "Bhuka Rwendo", toursBody: "Panora inoita kuti zvive nyore.", fingertipsTitle: "Pamaoko Ako", fingertipsBody: "Zimbabwe muhomwe.", seasonalSpring: "Chirimo", seasonalSummer: "Zhizha", seasonalAutumn: "Matsutso", seasonalWinter: "Chando", viewAllRegions: "Ona Matunhu Ese", viewAllCollections: "Ona Zvese" },
                nr: { heroTitle: "Hlala Kuhle.", subTitle: "Izwa iZimbabwe.", search: "Cinga", explore: "Hlola", stays: "Izindawo", adventures: "Izigigaba", login: "Ngena", hosting: "Bamba Iqhaza", reviews: "Ukubuyekeza", blog: "Ibhulogi", seasonal: "Izindawo Ezinhle", adventuresTitle: "Izigigaba", whyPanoraTitle: "Kungani iPanora?", whyPanoraSub: "Bhukha Ngokuqiniseka", toursTitle: "Bhukha", toursBody: "IPanora yenza kube lula.", fingertipsTitle: "Esezandleni", fingertipsBody: "Zimbabwe ephaketheni.", seasonalSpring: "Intwasahlobo", seasonalSummer: "Ihlobo", seasonalAutumn: "Ukwindla", seasonalWinter: "Ubusika", viewAllRegions: "Buka Zonke", viewAllCollections: "Buka Konke" },
            }
        };

        // ====================
        // UTILITY FUNCTIONS
        // ====================
        const navigate = (view, params = {}) => {
            state.currentView = view;
            if (Object.keys(params).length > 0) state.searchParams = params;
            window.scrollTo({ top: 0, behavior: 'smooth' });
            render();
        };

        const setTheme = (theme) => {
            state.theme = theme;
            document.documentElement.classList.toggle('dark', theme === 'dark');
            render();
        };

        const setLanguage = (lang) => {
            state.language = lang;
            render();
        };

        const addToCart = (listing) => {
            state.cart.push({
                listing,
                dates: { checkIn: '', checkOut: '' },
                guests: { adults: 1, children: 0 }
            });
            render();
        };

        const removeFromCart = (index) => {
            state.cart.splice(index, 1);
            render();
        };

        const clearCart = () => {
            state.cart = [];
            render();
        };

        const addListing = (newListing) => {
            state.listings.unshift(newListing);
            render();
        };

        const toggleAuthModal = () => {
            state.authModalOpen = !state.authModalOpen;
            render();
        };

        const generateTripIdea = async (query) => {
            state.aiLoading = true;
            render();
            
            // Simulate API call with timeout
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            const itineraries = [
                {
                    title: "Victoria Falls Adventure",
                    theme: "High-adrenaline action with natural wonders",
                    days: [
                        { dayNumber: 1, activity: "Arrival & Sunset Cruise", description: "Arrive at Victoria Falls Airport, check into your lodge, and enjoy a sunset cruise on the Zambezi River with drinks and hippo sightings." },
                        { dayNumber: 2, activity: "Falls Tour & White Water Rafting", description: "Morning tour of the Victoria Falls rainforest, followed by an adrenaline-packed white water rafting experience on the Zambezi." },
                        { dayNumber: 3, activity: "Helicopter Flight & Departure", description: "Take a breathtaking helicopter flight over the falls, then visit the local craft market before your departure." }
                    ]
                },
                {
                    title: "Romantic Nyanga Getaway",
                    theme: "Serene mountain retreat for couples",
                    days: [
                        { dayNumber: 1, activity: "Mountain Arrival", description: "Drive to Nyanga through scenic routes, check into a cozy cabin, and enjoy a private dinner by the fireplace." },
                        { dayNumber: 2, activity: "Waterfall Hiking", description: "Hike to the Pungwe and Mtarazi waterfalls with a picnic lunch. Evening wine tasting at a local vineyard." },
                        { dayNumber: 3, activity: "Cultural Experience", description: "Visit local craft centers, try traditional pottery, and enjoy a farewell dinner with live acoustic music." }
                    ]
                }
            ];
            
            state.aiTripIdea = itineraries[Math.floor(Math.random() * itineraries.length)];
            state.aiLoading = false;
            render();
        };

        // ====================
        // UI COMPONENTS
        // ====================
        const ListingCard = (data, onClick) => `
            <div onclick="${onClick}" class="group cursor-pointer bg-white dark:bg-slate-900 rounded-2xl overflow-hidden border border-transparent hover:border-amber-200 dark:hover:border-slate-800 transition-all duration-300 shadow-soft hover:shadow-deep h-full flex flex-col card-hover">
                <div class="relative aspect-[4/3] overflow-hidden bg-gradient-to-br from-slate-200 to-slate-300 dark:from-slate-800 dark:to-slate-900">
                    <img src="${data.image}" alt="${data.title}" class="object-cover w-full h-full transition-transform duration-700 group-hover:scale-110">
                    <div class="absolute top-3 right-3 z-10">
                        <button class="p-2.5 rounded-full glass text-white hover:bg-white/30 transition-colors">
                            <i data-lucide="heart" class="w-4 h-4"></i>
                        </button>
                    </div>
                    <div class="absolute top-3 left-3 z-10 flex gap-2">
                        <span class="px-3 py-1.5 bg-white/90 dark:bg-slate-900/90 backdrop-blur-md rounded-full text-xs font-bold text-slate-900 dark:text-white uppercase tracking-wide shadow-sm">${data.category}</span>
                        ${data.isOpen ? '<span class="px-3 py-1.5 bg-green-500/90 backdrop-blur-md rounded-full text-xs font-bold text-white uppercase tracking-wide shadow-sm">Open</span>' : ''}
                    </div>
                </div>
                <div class="p-5 flex-1 flex flex-col justify-between">
                    <div>
                        <div class="flex items-center space-x-1 mb-2 text-slate-500 dark:text-slate-400">
                            <i data-lucide="map-pin" class="w-3 h-3"></i>
                            <span class="text-xs font-bold uppercase tracking-wide">${data.province}</span>
                        </div>
                        <h3 class="font-bold text-lg text-slate-900 dark:text-white leading-tight group-hover:text-amber-500 transition-colors line-clamp-1">${data.title}</h3>
                        <p class="text-slate-500 dark:text-slate-400 text-sm mt-1 line-clamp-2">${data.location}</p>
                    </div>
                    <div class="flex items-end justify-between mt-5 pt-4 border-t border-slate-100 dark:border-slate-800">
                        <div class="flex items-center space-x-1 bg-slate-100 dark:bg-slate-800 px-2.5 py-1 rounded-lg">
                            <i data-lucide="star" class="w-3 h-3 fill-amber-400 text-amber-400"></i>
                            <span class="text-xs font-bold text-slate-900 dark:text-white">${data.rating}</span>
                        </div>
                        <div class="flex items-baseline space-x-1">
                            <span class="font-bold text-xl text-slate-900 dark:text-white">$${data.price}</span>
                            <span class="text-slate-500 text-sm">/ night</span>
                        </div>
                    </div>
                </div>
            </div>
        `;

        const SearchBar = (listings, onSearch, onInsightClick) => {
            const allLocations = [...new Set(listings.flatMap(l => [l.location, l.province]))].sort();
            return `
                <div class="relative z-40 w-full">
                    <div class="bg-white dark:bg-slate-800 rounded-[2rem] p-3 shadow-[0_8px_30px_rgb(0,0,0,0.12)] flex flex-col lg:flex-row items-center divide-y lg:divide-y-0 lg:divide-x divide-slate-100 dark:divide-slate-700">
                        <div class="flex-1 px-6 py-4 w-full relative group">
                            <label class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1 group-hover:text-amber-500 transition-colors">Where</label>
                            <div class="flex items-center">
                                <i data-lucide="map-pin" class="w-5 h-5 text-slate-400 mr-2"></i>
                                <input type="text" placeholder="Search destinations" class="w-full bg-transparent outline-none font-bold text-slate-800 dark:text-white placeholder-slate-300 text-sm" id="search-location">
                            </div>
                        </div>
                        <div class="px-6 py-4 w-full lg:w-auto group">
                            <label class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1 group-hover:text-amber-500 transition-colors">Check In</label>
                            <input type="date" min="${new Date().toISOString().split('T')[0]}" class="bg-transparent text-sm font-bold text-slate-800 dark:text-white outline-none w-full lg:w-32 cursor-pointer dark:[color-scheme:dark]" id="checkin-date">
                        </div>
                        <div class="px-6 py-4 w-full lg:w-auto group">
                            <label class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1 group-hover:text-amber-500 transition-colors">Check Out</label>
                            <input type="date" min="${new Date().toISOString().split('T')[0]}" class="bg-transparent text-sm font-bold text-slate-800 dark:text-white outline-none w-full lg:w-32 cursor-pointer dark:[color-scheme:dark]" id="checkout-date">
                        </div>
                        <div class="px-6 py-4 w-full lg:w-auto relative cursor-pointer group" onclick="toggleGuestPopup()">
                            <label class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1 group-hover:text-amber-500 transition-colors">Who</label>
                            <div class="flex items-center">
                                <i data-lucide="users" class="w-5 h-5 text-slate-400 mr-2"></i>
                                <span class="text-sm font-bold text-slate-800 dark:text-white whitespace-nowrap" id="guest-count">2 Guests</span>
                            </div>
                            <div id="guest-popup" class="hidden absolute top-full right-0 w-80 bg-white dark:bg-slate-800 shadow-2xl rounded-2xl mt-4 p-6 border border-slate-100 dark:border-slate-700 z-50">
                                <div class="flex justify-between items-center mb-6">
                                    <div>
                                        <div class="font-bold text-slate-900 dark:text-white text-base">Adults</div>
                                        <div class="text-xs text-slate-500">Ages 13+</div>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <button onclick="updateGuests('adults', -1)" class="w-8 h-8 rounded-full border border-slate-300 dark:border-slate-600 hover:border-amber-500 flex items-center justify-center dark:text-white">
                                            <i data-lucide="minus" class="w-4 h-4"></i>
                                        </button>
                                        <span class="font-bold w-6 text-center dark:text-white" id="adults-count">2</span>
                                        <button onclick="updateGuests('adults', 1)" class="w-8 h-8 rounded-full border border-slate-300 dark:border-slate-600 hover:border-amber-500 flex items-center justify-center dark:text-white">
                                            <i data-lucide="plus" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center mb-6">
                                    <div>
                                        <div class="font-bold text-slate-900 dark:text-white text-base">Children</div>
                                        <div class="text-xs text-slate-500">Ages 2-12</div>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <button onclick="updateGuests('children', -1)" class="w-8 h-8 rounded-full border border-slate-300 dark:border-slate-600 hover:border-amber-500 flex items-center justify-center dark:text-white">
                                            <i data-lucide="minus" class="w-4 h-4"></i>
                                        </button>
                                        <span class="font-bold w-6 text-center dark:text-white" id="children-count">0</span>
                                        <button onclick="updateGuests('children', 1)" class="w-8 h-8 rounded-full border border-slate-300 dark:border-slate-600 hover:border-amber-500 flex items-center justify-center dark:text-white">
                                            <i data-lucide="plus" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </div>
                                <button onclick="toggleGuestPopup()" class="w-full text-center text-amber-600 font-bold text-sm hover:underline">Done</button>
                            </div>
                        </div>
                        <div class="p-3 w-full lg:w-auto">
                            <button onclick="handleSearch()" class="w-full lg:w-auto gradient-bg text-white p-4 rounded-full shadow-lg flex items-center justify-center space-x-2 transition-transform hover:scale-105 animate-pulse-slow">
                                <i data-lucide="search" class="w-6 h-6"></i>
                                <span class="lg:hidden font-bold text-lg">Search</span>
                            </button>
                        </div>
                    </div>
                    ${onInsightClick ? `
                    <div class="flex justify-center mt-6">
                        <button onclick="${onInsightClick}" class="glass text-slate-900 dark:text-white border border-white/20 px-6 py-2.5 rounded-full font-medium text-sm hover:bg-white dark:hover:bg-slate-700 transition-all flex items-center space-x-2 shadow-lg hover:shadow-xl">
                            <i data-lucide="lightbulb" class="w-4 h-4 text-amber-500"></i>
                            <span>AI Travel Insight</span>
                        </button>
                    </div>` : ''}
                </div>
            `;
        };

        const AuthModal = () => {
            if (!state.authModalOpen) return '';
            return `
                <div class="fixed inset-0 z-[100] flex items-center justify-center px-4 animate-in fade-in duration-200">
                    <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="toggleAuthModal()"></div>
                    <div class="bg-white dark:bg-slate-900 rounded-3xl shadow-2xl w-full max-w-md overflow-hidden relative z-10 scale-in">
                        <button onclick="toggleAuthModal()" class="absolute top-4 right-4 p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full dark:text-white transition-colors">
                            <i data-lucide="x" class="w-5 h-5"></i>
                        </button>
                        <div class="flex border-b border-slate-200 dark:border-slate-700" id="auth-tabs">
                            <button onclick="switchAuthTab('traveler')" class="flex-1 py-4 font-bold transition-colors text-amber-500 border-b-2 border-amber-500 bg-amber-50/10">
                                Traveler
                            </button>
                            <button onclick="switchAuthTab('partner')" class="flex-1 py-4 font-bold transition-colors text-slate-500 hover:text-slate-700 dark:hover:text-slate-300">
                                Partner
                            </button>
                        </div>
                        <div class="p-8" id="auth-content">
                            <div class="space-y-4">
                                <div>
                                    <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">Welcome back</h3>
                                    <p class="text-slate-500 dark:text-slate-400 text-sm">Log in to manage your bookings and wishlist.</p>
                                </div>
                                <input type="email" placeholder="Email address" class="w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-amber-500 outline-none transition-all">
                                <button class="w-full gradient-bg text-white font-bold py-4 rounded-xl shadow-lg transition-transform hover:scale-[1.02]">Log In</button>
                                <div class="relative py-2">
                                    <div class="absolute inset-0 flex items-center">
                                        <div class="w-full border-t border-slate-200 dark:border-slate-700"></div>
                                    </div>
                                    <div class="relative flex justify-center text-sm">
                                        <span class="px-2 bg-white dark:bg-slate-900 text-slate-400">or</span>
                                    </div>
                                </div>
                                <button class="w-full border border-slate-300 dark:border-slate-700 py-3 rounded-xl font-medium flex items-center justify-center space-x-2 hover:bg-slate-50 dark:hover:bg-slate-800 dark:text-white transition-colors">
                                    <span>Continue with Google</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        // ====================
        // PAGE COMPONENTS
        // ====================
        const HomePage = () => {
            const t = state.translations[state.language] || state.translations.en;
            return `
                <main>
                    <!-- Hero Section -->
                    <div class="relative h-[95vh] w-full overflow-hidden bg-slate-900 clip-path-polygon">
                        <div class="absolute inset-0 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 opacity-90"></div>
                        <div class="absolute inset-0">
                            <div class="blob w-96 h-96 bg-amber-500 top-1/4 -left-20"></div>
                            <div class="blob w-96 h-96 bg-purple-500 bottom-1/4 -right-20"></div>
                        </div>
                        <div class="relative z-10 h-full flex flex-col justify-center items-center px-4 text-center pt-20">
                            <h1 class="hero-font text-5xl md:text-7xl lg:text-8xl font-bold text-white tracking-tight mb-8 max-w-5xl drop-shadow-lg slide-in">
                                ${t.heroTitle} <br>
                                <span class="gradient-text animate-glow">${t.subTitle}</span>
                            </h1>
                            ${SearchBar(state.listings, 'navigate("explore")', 'scrollToAIPlanner()')}
                            <div class="mt-12 flex flex-wrap gap-4 justify-center">
                                <button class="px-6 py-3 glass rounded-full text-white font-medium hover:bg-white/20 transition-all">
                                    <i data-lucide="play" class="w-4 h-4 inline mr-2"></i> Watch Demo
                                </button>
                                <button onclick="navigate('explore')" class="px-6 py-3 bg-white text-slate-900 rounded-full font-bold hover:bg-slate-100 transition-all">
                                    Explore Now
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Featured Stays -->
                    <section class="max-w-7xl mx-auto px-6 py-24">
                        <div class="flex justify-between items-end mb-10">
                            <div>
                                <h2 class="text-4xl font-bold mb-3 dark:text-white">Unforgettable Stays</h2>
                                <p class="text-slate-500 dark:text-slate-400 text-lg">From hidden gems to iconic destinations.</p>
                            </div>
                            <button onclick="navigate('explore')" class="hidden md:flex items-center space-x-2 font-bold text-slate-900 dark:text-amber-400 hover:text-amber-600 transition-colors">
                                <span>View all</span>
                                <i data-lucide="chevron-right" class="w-5 h-5"></i>
                            </button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            ${state.listings.slice(0, 6).map(listing => 
                                ListingCard(listing, `navigate('listing-details', {id: ${listing.id}})`)
                            ).join('')}
                        </div>
                        <button onclick="navigate('explore')" class="md:hidden w-full mt-8 bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-white py-3 rounded-xl font-bold">
                            View All Stays
                        </button>
                    </section>

                    <!-- AI Trip Planner -->
                    ${AITripPlanner()}

                    <!-- Seasonal Destinations -->
                    <section class="bg-gradient-to-b from-slate-50 to-white dark:from-slate-900/50 dark:to-slate-900 py-24">
                        <div class="max-w-7xl mx-auto px-6">
                            <h2 class="text-4xl font-bold text-center mb-16 dark:text-white">${t.seasonal}</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                                ${[
                                    {t: t.seasonalWinter, l: "Hwange", img: "https://images.unsplash.com/photo-1516426122078-c23e76319801?auto=format&fit=crop&q=80&w=600"},
                                    {t: t.seasonalSpring, l: "Harare", img: "https://images.unsplash.com/photo-1558280417-251d7c4b0366?auto=format&fit=crop&q=80&w=600"},
                                    {t: t.seasonalSummer, l: "Nyanga", img: "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?auto=format&fit=crop&q=80&w=600"},
                                    {t: t.seasonalAutumn, l: "Vic Falls", img: "https://images.unsplash.com/photo-1534008897995-27a23e859048?auto=format&fit=crop&q=80&w=600"}
                                ].map((item, i) => `
                                    <div onclick="navigate('explore', {location: '${item.l}'})" class="group relative h-80 rounded-2xl overflow-hidden cursor-pointer shadow-lg animate-float" style="animation-delay: ${i * 0.5}s">
                                        <img src="${item.img}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="${item.t}">
                                        <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent p-6 flex flex-col justify-end">
                                            <h3 class="text-2xl font-bold text-white mb-1">${item.t}</h3>
                                            <p class="text-amber-400 font-medium flex items-center">
                                                <i data-lucide="map-pin" class="w-4 h-4 mr-1"></i> ${item.l}
                                            </p>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </section>

                    <!-- Adventure Categories -->
                    <section class="max-w-7xl mx-auto px-6 py-24">
                        <h2 class="text-4xl font-bold mb-12 dark:text-white text-center">${t.adventuresTitle}</h2>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6">
                            ${state.adventureTypes.map(adv => `
                                <div onclick="navigate('explore', {category: '${adv.slug}'})" class="group bg-white dark:bg-slate-900 p-6 rounded-2xl shadow-soft hover:shadow-deep cursor-pointer transition-all-smooth text-center">
                                    <div class="text-3xl mb-4 group-hover:scale-110 transition-transform">${adv.icon}</div>
                                    <h3 class="font-bold dark:text-white mb-2">${adv.name}</h3>
                                    <p class="text-sm text-slate-500 dark:text-slate-400">${adv.desc}</p>
                                </div>
                            `).join('')}
                        </div>
                    </section>

                    <!-- Trust Indicators -->
                    <section class="bg-slate-900 text-white py-24">
                        <div class="max-w-7xl mx-auto px-6">
                            <div class="text-center mb-16">
                                <span class="text-amber-500 font-bold uppercase tracking-widest text-sm mb-2 block">${t.whyPanoraTitle}</span>
                                <h2 class="text-4xl font-bold">${t.whyPanoraSub}</h2>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                                ${[
                                    {icon: 'shield-check', t: "Verified Listings", d: "Every operator vetted."},
                                    {icon: 'lock', t: "Secure Payments", d: "Bank-grade security."},
                                    {icon: 'message-square', t: "24/7 Support", d: "Local experts available."},
                                    {icon: 'globe', t: "Best Price", d: "Direct from hosts."}
                                ].map(item => `
                                    <div class="p-8 bg-white/5 rounded-2xl border border-white/10 hover:bg-white/10 transition-colors text-center group">
                                        <div class="w-16 h-16 bg-amber-500/20 rounded-full flex items-center justify-center mx-auto mb-6 text-amber-500 group-hover:scale-110 transition-transform">
                                            <i data-lucide="${item.icon}" class="w-8 h-8"></i>
                                        </div>
                                        <h3 class="font-bold text-xl mb-2">${item.t}</h3>
                                        <p class="text-slate-400">${item.d}</p>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </section>

                    <!-- CTA Section -->
                    <section class="max-w-7xl mx-auto px-6 py-24 grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                        <div>
                            <div class="font-bold text-4xl tracking-tighter text-slate-900 dark:text-white mb-6">
                                PANORA<span class="text-amber-500">.</span>
                            </div>
                            <h2 class="text-5xl font-bold mb-6 dark:text-white leading-tight text-balance">${t.toursTitle}</h2>
                            <p class="text-slate-600 dark:text-slate-400 text-xl mb-10 leading-relaxed">${t.toursBody}</p>
                            <div class="flex items-start space-x-6 p-6 rounded-2xl bg-amber-50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-900/20">
                                <div class="bg-amber-100 dark:bg-amber-900/30 p-3 rounded-xl">
                                    <i data-lucide="smartphone" class="w-8 h-8 text-amber-600 dark:text-amber-400"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-xl dark:text-white mb-2">${t.fingertipsTitle}</h4>
                                    <p class="text-slate-600 dark:text-slate-400">${t.fingertipsBody}</p>
                                </div>
                            </div>
                        </div>
                        <div class="relative h-[600px] rounded-3xl overflow-hidden shadow-2xl animate-float">
                            <img src="https://images.unsplash.com/photo-1523805009345-7448845a9e53?auto=format&fit=crop&q=80&w=1000" class="w-full h-full object-cover" alt="Safari">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"></div>
                            <div class="absolute bottom-8 left-8 text-white">
                                <div class="text-sm font-bold uppercase tracking-widest mb-1 text-amber-400">Featured Experience</div>
                                <div class="text-3xl font-bold">Hwange Safari Camp</div>
                            </div>
                        </div>
                    </section>
                </main>
            `;
        };

        const ExplorePage = () => {
            const filtered = state.listings.filter(l => {
                if (state.searchParams.location && 
                    !l.location.toLowerCase().includes(state.searchParams.location.toLowerCase()) && 
                    !l.province.toLowerCase().includes(state.searchParams.location.toLowerCase())) 
                    return false;
                if (state.searchParams.category && 
                    !l.category.toLowerCase().includes(state.searchParams.category.toLowerCase())) 
                    return false;
                if (state.searchParams.province && l.province !== state.searchParams.province) 
                    return false;
                return true;
            });
            
            return `
                <div class="pt-32 pb-20 max-w-7xl mx-auto px-6 min-h-screen">
                    <div class="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4">
                        <div>
                            <button onclick="navigate('home')" class="flex items-center text-slate-500 hover:text-amber-600 mb-4 font-bold text-sm">
                                <i data-lucide="arrow-left" class="w-4 h-4 mr-2"></i> Back to Home
                            </button>
                            <h1 class="text-4xl font-bold dark:text-white">Explore Zimbabwe</h1>
                        </div>
                        <div class="flex items-center gap-3">
                            <button class="flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg font-bold text-sm dark:text-white">
                                <i data-lucide="filter" class="w-4 h-4"></i> Filters
                            </button>
                            <button class="flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg font-bold text-sm dark:text-white">
                                <i data-lucide="arrow-up-down" class="w-4 h-4"></i> Sort
                            </button>
                        </div>
                    </div>
                    <p class="text-slate-500 dark:text-slate-400 mb-8 font-medium">
                        ${filtered.length} stays found ${state.searchParams.location ? `near "${state.searchParams.location}"` : ''}
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        ${filtered.length > 0 ? 
                            filtered.map(listing => 
                                ListingCard(listing, `navigate('listing-details', {id: ${listing.id}})`)
                            ).join('') :
                            `<div class="col-span-full py-20 text-center">
                                <p class="text-xl font-bold dark:text-white mb-2">No listings found</p>
                                <p class="text-slate-500">Try adjusting your filters or search criteria.</p>
                            </div>`
                        }
                    </div>
                </div>
            `;
        };

        const ListingDetailsPage = () => {
            const listing = state.listings.find(l => l.id === Number(state.searchParams.id));
            if (!listing) return `<div class="pt-32 text-center">Listing not found</div>`;
            
            return `
                <div class="pt-28 pb-20 max-w-7xl mx-auto px-6 min-h-screen">
                    <button onclick="navigate('explore')" class="flex items-center text-slate-500 hover:text-amber-600 mb-6 font-bold">
                        <i data-lucide="arrow-left" class="w-5 h-5 mr-2"></i> Back to Explore
                    </button>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
                        <div class="lg:col-span-2 space-y-8">
                            <div class="rounded-3xl overflow-hidden h-[500px] shadow-2xl relative">
                                <img src="${listing.image}" class="w-full h-full object-cover" alt="${listing.title}">
                                <div class="absolute bottom-6 left-6 flex gap-2">
                                    ${listing.amenities.map(a => 
                                        `<span class="bg-black/50 backdrop-blur text-white px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide">${a}</span>`
                                    ).join('')}
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-start mb-4">
                                    <h1 class="text-4xl font-bold dark:text-white leading-tight">${listing.title}</h1>
                                    <div class="flex flex-col items-end">
                                        <div class="flex items-center text-amber-500 gap-1 mb-1">
                                            <i data-lucide="star" class="w-5 h-5 fill-current"></i>
                                            <span class="font-bold text-xl">${listing.rating}</span>
                                        </div>
                                        <span class="text-slate-400 text-sm">120 reviews</span>
                                    </div>
                                </div>
                                <p class="text-slate-500 dark:text-slate-400 text-lg flex items-center mb-6">
                                    <i data-lucide="map-pin" class="w-5 h-5 mr-2"></i> 
                                    ${listing.location}, ${listing.province}
                                </p>
                                <div class="prose dark:prose-invert max-w-none text-lg text-slate-600 dark:text-slate-300 leading-relaxed">
                                    <h3 class="text-2xl font-bold mb-4 text-slate-900 dark:text-white">About this place</h3>
                                    <p>${listing.description || "Experience the best of Zimbabwean hospitality in this stunning location. Featuring world-class amenities and breathtaking views, it is the perfect getaway for travelers seeking comfort and adventure."}</p>
                                </div>
                            </div>
                        </div>
                        <div class="lg:col-span-1">
                            <div class="bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-100 dark:border-slate-700 sticky top-32">
                                <div class="flex justify-between items-end mb-6 pb-6 border-b border-slate-100 dark:border-slate-700">
                                    <div>
                                        <span class="text-3xl font-bold text-slate-900 dark:text-white">$${listing.price}</span>
                                        <span class="text-slate-500">/ night</span>
                                    </div>
                                    ${listing.isOpen ? 
                                        '<span class="text-green-600 font-bold bg-green-100 dark:bg-green-900/30 px-3 py-1 rounded-full text-xs">Available</span>' : 
                                        '<span class="text-red-500 font-bold">Closed</span>'
                                    }
                                </div>
                                <div class="space-y-4 mb-8">
                                    <div class="grid grid-cols-2 gap-2">
                                        <div class="p-3 border rounded-xl dark:border-slate-600">
                                            <label class="block text-xs font-bold uppercase text-slate-500 mb-1">Check-in</label>
                                            <div class="font-bold dark:text-white">Select Date</div>
                                        </div>
                                        <div class="p-3 border rounded-xl dark:border-slate-600">
                                            <label class="block text-xs font-bold uppercase text-slate-500 mb-1">Check-out</label>
                                            <div class="font-bold dark:text-white">Select Date</div>
                                        </div>
                                    </div>
                                    <div class="p-3 border rounded-xl dark:border-slate-600 flex justify-between items-center">
                                        <label class="block text-xs font-bold uppercase text-slate-500">Guests</label>
                                        <div class="font-bold dark:text-white">2 Guests</div>
                                    </div>
                                </div>
                                <button onclick="addToCart(${JSON.stringify(listing).replace(/"/g, '&quot;')}); navigate('cart')" 
                                        class="w-full gradient-bg text-white font-bold py-4 rounded-xl shadow-lg transition-transform hover:scale-[1.02] flex items-center justify-center gap-2">
                                    <i data-lucide="shopping-cart" class="w-5 h-5"></i> Reserve Now
                                </button>
                                <p class="text-center text-xs text-slate-400 mt-4">You won't be charged yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        const CartPage = () => {
            const total = state.cart.reduce((acc, item) => acc + item.listing.price, 0);
            
            return `
                <div class="pt-32 pb-20 max-w-4xl mx-auto px-6 min-h-screen">
                    <h1 class="text-4xl font-bold dark:text-white mb-8">Your Trip Cart</h1>
                    ${state.cart.length === 0 ? `
                        <div class="text-center py-20 bg-slate-50 dark:bg-slate-800 rounded-3xl">
                            <i data-lucide="shopping-cart" class="w-12 h-12 mx-auto text-slate-300 mb-4"></i>
                            <p class="text-slate-500 text-lg">Your cart is empty.</p>
                            <button onclick="navigate('explore')" class="mt-6 text-amber-600 font-bold hover:underline">
                                Start Exploring
                            </button>
                        </div>
                    ` : `
                        <div class="space-y-6">
                            ${state.cart.map((item, i) => `
                                <div class="flex justify-between items-center bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700">
                                    <div class="flex items-center gap-6">
                                        <img src="${item.listing.image}" class="w-24 h-24 rounded-xl object-cover shadow-md" alt="${item.listing.title}">
                                        <div>
                                            <h3 class="font-bold text-xl dark:text-white mb-1">${item.listing.title}</h3>
                                            <p class="text-slate-500 mb-2">${item.listing.province}</p>
                                            <p class="font-bold text-amber-600">$${item.listing.price} / night</p>
                                        </div>
                                    </div>
                                    <button onclick="removeFromCart(${i})" class="p-2 hover:bg-red-50 text-red-500 rounded-full transition-colors">
                                        <i data-lucide="x" class="w-5 h-5"></i>
                                    </button>
                                </div>
                            `).join('')}
                            <div class="flex justify-between items-center pt-8 border-t dark:border-slate-700 mt-8">
                                <span class="text-2xl font-bold dark:text-white">Total</span>
                                <span class="text-3xl font-bold text-amber-600">$${total}</span>
                            </div>
                            <div class="flex justify-end mt-8">
                                <button onclick="navigate('checkout')" 
                                        class="bg-slate-900 dark:bg-white dark:text-slate-900 text-white font-bold py-4 px-12 rounded-xl shadow-lg hover:shadow-xl transition-all">
                                    Proceed to Checkout
                                </button>
                            </div>
                        </div>
                    `}
                </div>
            `;
        };

        const CheckoutPage = () => {
            return `
                <div class="pt-32 pb-20 max-w-2xl mx-auto px-6 min-h-screen">
                    <button onclick="navigate('cart')" class="flex items-center text-slate-500 hover:text-amber-600 mb-8 font-bold">
                        <i data-lucide="arrow-left" class="w-5 h-5 mr-2"></i> Back to Cart
                    </button>
                    <h1 class="text-4xl font-bold dark:text-white mb-8">Secure Checkout</h1>
                    <form onsubmit="handleCheckout(event)" class="space-y-6 bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-xl border border-slate-100 dark:border-slate-700">
                        <div class="grid grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-bold dark:text-white mb-2 uppercase tracking-wide">First Name</label>
                                <input required class="w-full p-4 rounded-xl border bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-amber-500">
                            </div>
                            <div>
                                <label class="block text-sm font-bold dark:text-white mb-2 uppercase tracking-wide">Last Name</label>
                                <input required class="w-full p-4 rounded-xl border bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-amber-500">
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-bold dark:text-white mb-2 uppercase tracking-wide">Email Address</label>
                            <input required type="email" class="w-full p-4 rounded-xl border bg-slate-50 dark:bg-slate-900 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-amber-500">
                        </div>
                        <div>
                            <label class="block text-sm font-bold dark:text-white mb-2 uppercase tracking-wide">Card Details</label>
                            <div class="flex items-center border dark:border-slate-700 rounded-xl overflow-hidden bg-slate-50 dark:bg-slate-900">
                                <div class="p-4">
                                    <i data-lucide="credit-card" class="w-6 h-6 text-slate-400"></i>
                                </div>
                                <input required placeholder="Card Number" class="w-full p-4 bg-transparent outline-none dark:text-white">
                            </div>
                        </div>
                        <div class="pt-6 border-t border-slate-100 dark:border-slate-700">
                            <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-2">
                                <i data-lucide="lock" class="w-5 h-5"></i> Pay & Confirm
                            </button>
                        </div>
                    </form>
                </div>
            `;
        };

        const SuccessPage = () => {
            return `
                <div class="pt-40 text-center min-h-screen">
                    <div class="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center text-white mx-auto mb-6 shadow-xl">
                        <i data-lucide="check" class="w-12 h-12" stroke-width="4"></i>
                    </div>
                    <h1 class="text-5xl font-bold dark:text-white mb-4">Booking Confirmed!</h1>
                    <p class="text-xl text-slate-500 mb-10">We've sent your itinerary to your email.</p>
                    <button onclick="navigate('home')" 
                            class="bg-slate-900 dark:bg-white dark:text-slate-900 text-white px-8 py-4 rounded-xl font-bold text-lg hover:opacity-90">
                        Back Home
                    </button>
                </div>
            `;
        };

        const PartnerDashboardPage = () => {
            const myListings = state.listings.slice(0, 3);
            
            return `
                <div class="flex min-h-screen bg-slate-50 dark:bg-slate-900 font-sans">
                    <aside class="w-72 bg-slate-900 text-white fixed h-full hidden lg:flex flex-col justify-between">
                        <div>
                            <div class="p-8 font-bold text-3xl tracking-tighter border-b border-slate-800 text-amber-500">
                                PANORA. <span class="text-xs font-normal text-white block mt-1 tracking-normal opacity-50">Partner Hub</span>
                            </div>
                            <nav class="p-6 space-y-3">
                                ${['listings', 'calendar', 'bookings', 'messages'].map(tab => `
                                    <button onclick="setPartnerTab('${tab}')" 
                                            class="w-full flex items-center space-x-3 px-4 py-4 rounded-xl transition-all 
                                            ${state.partnerDashboardTab === tab ? 
                                                'bg-amber-500 text-white shadow-lg font-bold' : 
                                                'text-slate-400 hover:bg-slate-800 hover:text-white'}">
                                        <i data-lucide="${tab === 'listings' ? 'layout-dashboard' : 
                                                        tab === 'calendar' ? 'calendar-days' : 
                                                        tab === 'bookings' ? 'dollar-sign' : 'inbox'}" 
                                           class="w-5 h-5"></i>
                                        <span>${tab.charAt(0).toUpperCase() + tab.slice(1)}</span>
                                    </button>
                                `).join('')}
                            </nav>
                        </div>
                        <div class="p-6 border-t border-slate-800">
                            <button onclick="navigate('home')" 
                                    class="w-full flex items-center space-x-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl transition-colors">
                                <i data-lucide="log-out" class="w-5 h-5"></i>
                                <span>Back to Website</span>
                            </button>
                        </div>
                    </aside>
                    <main class="lg:ml-72 flex-1 p-10">
                        <header class="flex justify-between items-center mb-10">
                            <div>
                                <h1 class="text-3xl font-bold dark:text-white">
                                    ${state.partnerDashboardTab === 'listings' ? 'Property Management' : 
                                      state.partnerDashboardTab.charAt(0).toUpperCase() + state.partnerDashboardTab.slice(1)}
                                </h1>
                                <p class="text-slate-500 mt-1">Manage your business on Panora.</p>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-amber-500 rounded-full flex items-center justify-center text-white font-bold shadow-lg">P</div>
                            </div>
                        </header>
                        
                        ${state.partnerDashboardTab === 'listings' ? `
                            <div>
                                <div class="flex justify-between items-center mb-8">
                                    <div class="grid grid-cols-3 gap-6 w-full max-w-3xl">
                                        <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-700">
                                            <div class="text-slate-500 text-xs uppercase font-bold tracking-wide mb-2">Total Properties</div>
                                            <div class="text-3xl font-bold dark:text-white">${myListings.length}</div>
                                        </div>
                                    </div>
                                    <button onclick="toggleAddProperty()" 
                                            class="gradient-bg text-white px-8 py-4 rounded-xl font-bold flex items-center space-x-2 shadow-xl transition-transform hover:scale-105">
                                        <i data-lucide="plus-circle" class="w-5 h-5"></i>
                                        <span>Add Property</span>
                                    </button>
                                </div>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8">
                                    ${myListings.map(item => `
                                        <div class="bg-white dark:bg-slate-800 rounded-2xl overflow-hidden border border-slate-100 dark:border-slate-700 shadow-sm hover:shadow-xl transition-all group">
                                            <div class="h-56 bg-slate-200 relative">
                                                <img src="${item.image}" class="w-full h-full object-cover" alt="${item.title}">
                                                <div class="absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-md">Live</div>
                                            </div>
                                            <div class="p-6">
                                                <h3 class="font-bold text-xl dark:text-white truncate mb-1">${item.title}</h3>
                                                <p class="text-slate-500 text-sm mb-6 flex items-center">
                                                    <i data-lucide="map-pin" class="w-3 h-3 mr-1"></i> ${item.location}
                                                </p>
                                                <div class="flex justify-between items-center pt-4 border-t border-slate-100 dark:border-slate-700">
                                                    <span class="font-bold text-xl dark:text-white">$${item.price}</span>
                                                    <button class="text-amber-500 font-bold text-sm hover:underline flex items-center gap-1">
                                                        <i data-lucide="settings" class="w-3 h-3"></i> Manage
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : `
                            <div class="text-center py-32 text-slate-400 bg-white dark:bg-slate-800 rounded-3xl border border-dashed border-slate-300 dark:border-slate-700">
                                <i data-lucide="${state.partnerDashboardTab === 'calendar' ? 'calendar-days' : 
                                                state.partnerDashboardTab === 'bookings' ? 'dollar-sign' : 'inbox'}" 
                                   class="w-12 h-12 mx-auto mb-4 opacity-50"></i>
                                <h3 class="text-xl font-bold">${state.partnerDashboardTab === 'calendar' ? 'Calendar Sync' : 
                                                                state.partnerDashboardTab === 'bookings' ? 'Bookings' : 'Messages'}</h3>
                                <p>${state.partnerDashboardTab === 'calendar' ? 'Availability management coming soon.' : 
                                    state.partnerDashboardTab === 'bookings' ? 'No active bookings yet.' : 'Inbox is empty.'}</p>
                            </div>
                        `}
                        
                        ${state.isAddingProperty ? `
                            <div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm">
                                <div class="bg-white dark:bg-slate-900 rounded-3xl p-10 w-full max-w-lg shadow-2xl">
                                    <div class="flex justify-between items-center mb-8">
                                        <h2 class="text-2xl font-bold dark:text-white">Add New Listing</h2>
                                        <button onclick="toggleAddProperty()" class="p-2 hover:bg-slate-100 rounded-full">
                                            <i data-lucide="x" class="w-6 h-6"></i>
                                        </button>
                                    </div>
                                    <form onsubmit="handleAddProperty(event)" class="space-y-6">
                                        <div>
                                            <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2 uppercase tracking-wide">Property Name</label>
                                            <input type="text" required 
                                                   class="w-full p-4 rounded-xl border bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-amber-500" 
                                                   placeholder="e.g. Sunset Paradise Lodge"
                                                   value="${state.newProperty.title}"
                                                   oninput="updateNewProperty('title', this.value)">
                                        </div>
                                        <div class="grid grid-cols-2 gap-6">
                                            <div>
                                                <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2 uppercase tracking-wide">Price ($)</label>
                                                <input type="number" required 
                                                       class="w-full p-4 rounded-xl border bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-amber-500" 
                                                       placeholder="150"
                                                       value="${state.newProperty.price}"
                                                       oninput="updateNewProperty('price', this.value)">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2 uppercase tracking-wide">Province</label>
                                                <select class="w-full p-4 rounded-xl border bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-amber-500"
                                                        onchange="updateNewProperty('province', this.value)">
                                                    ${state.provinces.map(p => `
                                                        <option value="${p}" ${p === state.newProperty.province ? 'selected' : ''}>${p}</option>
                                                    `).join('')}
                                                </select>
                                            </div>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2 uppercase tracking-wide">Category</label>
                                            <select class="w-full p-4 rounded-xl border bg-slate-50 dark:bg-slate-800 dark:border-slate-700 dark:text-white outline-none focus:ring-2 focus:ring-amber-500"
                                                    onchange="updateNewProperty('category', this.value)">
                                                <option value="Lodge" ${state.newProperty.category === 'Lodge' ? 'selected' : ''}>Lodge</option>
                                                <option value="Resorts" ${state.newProperty.category === 'Resorts' ? 'selected' : ''}>Resorts</option>
                                                <option value="Camps" ${state.newProperty.category === 'Camps' ? 'selected' : ''}>Camps</option>
                                                <option value="Hotels" ${state.newProperty.category === 'Hotels' ? 'selected' : ''}>Hotels</option>
                                            </select>
                                        </div>
                                        <div class="pt-4">
                                            <button type="submit" class="w-full py-4 gradient-bg text-white rounded-xl font-bold shadow-lg">
                                                Publish Listing
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        ` : ''}
                    </main>
                </div>
            `;
        };

        const AITripPlanner = () => {
            return `
                <section class="max-w-7xl mx-auto px-6 py-24">
                    <div class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white p-8 md:p-16 rounded-[3rem] grid grid-cols-1 lg:grid-cols-3 gap-12 shadow-2xl relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-96 h-96 bg-amber-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"></div>
                        <div class="lg:col-span-1 relative z-10">
                            <div class="w-14 h-14 bg-amber-500/20 rounded-2xl flex items-center justify-center mb-6 text-amber-400">
                                <i data-lucide="lightbulb" class="w-8 h-8"></i>
                            </div>
                            <h2 class="text-4xl font-bold mb-4 leading-tight">AI Trip Planner</h2>
                            <p class="text-slate-300 mb-8 text-lg">Describe your dream Zimbabwean adventure, and let our AI craft the perfect itinerary instantly.</p>
                            <form onsubmit="handleAITripPlanner(event)" class="space-y-4">
                                <input type="text" 
                                       value="${state.aiTripPlannerQuery}"
                                       oninput="state.aiTripPlannerQuery = this.value"
                                       placeholder="e.g. A romantic weekend in Nyanga" 
                                       class="w-full px-6 py-4 rounded-2xl text-slate-900 bg-white focus:ring-4 focus:ring-amber-500/50 outline-none text-lg"
                                       ${state.aiLoading ? 'disabled' : ''}>
                                <button type="submit" 
                                        ${state.aiLoading ? 'disabled' : ''}
                                        class="w-full gradient-bg text-slate-900 font-bold py-4 rounded-2xl flex items-center justify-center space-x-3 transition-all hover:opacity-90">
                                    ${state.aiLoading ? `
                                        <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-white"></div>
                                        <span>Generating...</span>
                                    ` : `
                                        <i data-lucide="send" class="w-6 h-6"></i>
                                        <span>Generate Itinerary</span>
                                    `}
                                </button>
                            </form>
                        </div>
                        <div class="lg:col-span-2 min-h-[400px] relative z-10">
                            ${state.aiTripIdea ? `
                                <div class="bg-white/5 p-8 rounded-3xl backdrop-blur-md border border-white/10 h-full slide-in">
                                    <h3 class="text-3xl font-bold text-amber-400 mb-2">${state.aiTripIdea.title}</h3>
                                    <p class="text-slate-300 mb-8 text-lg italic">${state.aiTripIdea.theme}</p>
                                    <div class="space-y-6">
                                        ${state.aiTripIdea.days.map(day => `
                                            <div class="pl-6 border-l-4 border-amber-500/30">
                                                <div class="font-bold text-xl text-amber-400 mb-1">Day ${day.dayNumber}: ${day.activity}</div>
                                                <p class="text-lg text-slate-300 leading-relaxed">${day.description}</p>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : `
                                <div class="absolute inset-0 flex items-center justify-center text-slate-500 flex-col">
                                    <i data-lucide="map" class="w-16 h-16 mb-4 opacity-20"></i>
                                    <p class="text-xl">Your itinerary will appear here.</p>
                                </div>
                            `}
                        </div>
                    </div>
                </section>
            `;
        };

        const Navbar = () => {
            const t = state.translations[state.language] || state.translations.en;
            return `
                <nav class="sticky-nav bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl shadow-lg py-4 text-slate-900 dark:text-white transition-all duration-300">
                    <div class="max-w-7xl mx-auto px-6 flex justify-between items-center relative">
                        <div onclick="navigate('home')" class="font-bold text-3xl tracking-tighter cursor-pointer z-50 flex items-center">
                            PANORA<span class="text-amber-500">.</span>
                        </div>
                        <div class="hidden lg:flex space-x-10 font-medium text-sm tracking-wide">
                            <button onclick="navigate('explore')" class="hover:text-amber-500 transition-colors uppercase font-bold">Explore</button>
                            <div class="relative group">
                                <button class="hover:text-amber-500 transition-colors flex items-center uppercase font-bold">
                                    Adventures <i data-lucide="chevron-down" class="w-4 h-4 ml-1"></i>
                                </button>
                                <div class="absolute top-full left-0 w-64 bg-white dark:bg-slate-900 shadow-2xl rounded-2xl mt-4 p-2 overflow-hidden border border-slate-100 dark:border-slate-800 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                                    ${state.adventureTypes.slice(0,5).map(a => `
                                        <button onclick="navigate('explore', {category: '${a.slug}'})" 
                                                class="block w-full text-left px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl text-slate-700 dark:text-slate-300 font-bold">
                                            ${a.name}
                                        </button>
                                    `).join('')}
                                </div>
                            </div>
                            <button onclick="navigate('blog')" class="hover:text-amber-500 transition-colors uppercase font-bold">Blog</button>
                        </div>
                        <div class="hidden lg:flex items-center space-x-6">
                            <button onclick="setTheme('${state.theme === 'light' ? 'dark' : 'light'}')" 
                                    class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors">
                                ${state.theme === 'light' ? 
                                    '<i data-lucide="moon" class="w-5 h-5"></i>' : 
                                    '<i data-lucide="sun" class="w-5 h-5 text-amber-400"></i>'}
                            </button>
                            <button onclick="navigate('cart')" class="relative p-2 hover:text-amber-500 transition-colors">
                                <i data-lucide="shopping-cart" class="w-5 h-5"></i>
                                ${state.cart.length > 0 ? `
                                    <span class="absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-5 h-5 rounded-full flex items-center justify-center font-bold">
                                        ${state.cart.length}
                                    </span>
                                ` : ''}
                            </button>
                            <button onclick="toggleAuthModal()" 
                                    class="gradient-bg text-white px-6 py-3 rounded-full font-bold shadow-lg shadow-amber-500/20 transition-transform hover:scale-105">
                                Sign In
                            </button>
                        </div>
                        <button class="lg:hidden p-2" onclick="toggleMobileMenu()">
                            <i data-lucide="menu" class="w-6 h-6"></i>
                        </button>
                    </div>
                </nav>
            `;
        };

        const Footer = () => {
            return `
                <footer class="bg-slate-900 text-white py-20 border-t border-slate-800">
                    <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-12 mb-16">
                        <div>
                            <div class="font-bold text-3xl tracking-tighter mb-6">
                                PANORA<span class="text-amber-500">.</span>
                            </div>
                            <p class="text-slate-400 text-sm leading-relaxed">
                                Discover the soul of Zimbabwe with the most trusted local travel marketplace.
                            </p>
                        </div>
                        <div>
                            <h4 class="font-bold mb-6 text-lg">Company</h4>
                            <ul class="space-y-4 text-slate-400">
                                <li><button onclick="navigate('home')" class="hover:text-white">About Us</button></li>
                                <li><button onclick="navigate('blog')" class="hover:text-white">Blog</button></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold mb-6 text-lg">Support</h4>
                            <ul class="space-y-4 text-slate-400">
                                <li><a href="mailto:victormakwarimba.t@gmail.com" class="hover:text-white">Help Center</a></li>
                                <li><a href="mailto:victormakwarimba.t@gmail.com" class="hover:text-white">Contact Us</a></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-bold mb-6 text-lg">Newsletter</h4>
                            <p class="text-slate-400 text-sm mb-4">Get travel tips & hidden gems.</p>
                            <div class="flex">
                                <input type="email" placeholder="Email" class="bg-slate-800 text-white px-4 py-3 rounded-l-xl outline-none w-full">
                                <button class="gradient-bg px-5 rounded-r-xl font-bold hover:opacity-90 transition-colors">
                                    Go
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="max-w-7xl mx-auto px-6 pt-8 border-t border-slate-800 flex flex-col md:flex-row justify-between text-slate-500 text-sm">
                        <p>Â© 2025 Panora Travels. All rights reserved.</p>
                        <div class="flex space-x-8">
                            <button onclick="navigate('privacy')" class="hover:text-white">Privacy</button>
                            <button onclick="navigate('terms')" class="hover:text-white">Terms</button>
                        </div>
                    </div>
                </footer>
            `;
        };

        // ====================
        // EVENT HANDLERS
        // ====================
        window.handleSearch = () => {
            const location = document.getElementById('search-location')?.value || '';
            navigate('explore', { location });
        };

        window.toggleGuestPopup = () => {
            const popup = document.getElementById('guest-popup');
            if (popup) popup.classList.toggle('hidden');
        };

        window.updateGuests = (type, delta) => {
            const adultsEl = document.getElementById('adults-count');
            const childrenEl = document.getElementById('children-count');
            const guestCountEl = document.getElementById('guest-count');
            
            if (type === 'adults' && adultsEl) {
                const current = parseInt(adultsEl.textContent);
                const newVal = Math.max(1, current + delta);
                adultsEl.textContent = newVal;
            } else if (type === 'children' && childrenEl) {
                const current = parseInt(childrenEl.textContent);
                const newVal = Math.max(0, current + delta);
                childrenEl.textContent = newVal;
            }
            
            if (adultsEl && childrenEl && guestCountEl) {
                const total = parseInt(adultsEl.textContent) + parseInt(childrenEl.textContent);
                guestCountEl.textContent = total + ' Guest' + (total !== 1 ? 's' : '');
            }
        };

        window.switchAuthTab = (tab) => {
            const tabs = document.querySelectorAll('#auth-tabs button');
            const content = document.getElementById('auth-content');
            tabs.forEach(t => t.className = t.className.replace('text-amber-500 border-b-2 border-amber-500 bg-amber-50/10', 'text-slate-500 hover:text-slate-700 dark:hover:text-slate-300'));
            tabs[tab === 'traveler' ? 0 : 1].className += ' text-amber-500 border-b-2 border-amber-500 bg-amber-50/10';
            
            if (tab === 'partner') {
                content.innerHTML = `
                    <div class="text-center space-y-6">
                        <div>
                            <i data-lucide="briefcase" class="w-12 h-12 mx-auto text-amber-500 mb-4"></i>
                            <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">Host with Panora</h3>
                            <p class="text-slate-500 dark:text-slate-400 text-sm">Manage properties and bookings in one place.</p>
                        </div>
                        <button onclick="toggleAuthModal(); navigate('dashboard')" 
                                class="w-full bg-slate-900 dark:bg-white dark:text-slate-900 text-white font-bold py-4 rounded-xl hover:opacity-90 transition-all shadow-lg">
                            Login to Admin Dashboard
                        </button>
                        <div class="pt-4 border-t border-slate-100 dark:border-slate-800">
                            <p class="text-sm text-slate-500 dark:text-slate-400 mb-3">Not a partner yet?</p>
                            <button onclick="toggleAuthModal(); navigate('hosting')" 
                                    class="text-amber-600 font-bold hover:underline">
                                List your place here
                            </button>
                        </div>
                    </div>
                `;
                lucide.createIcons();
            } else {
                content.innerHTML = `
                    <div class="space-y-4">
                        <div>
                            <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-2">Welcome back</h3>
                            <p class="text-slate-500 dark:text-slate-400 text-sm">Log in to manage your bookings and wishlist.</p>
                        </div>
                        <input type="email" placeholder="Email address" class="w-full p-4 rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white focus:ring-2 focus:ring-amber-500 outline-none transition-all">
                        <button class="w-full gradient-bg text-white font-bold py-4 rounded-xl shadow-lg transition-transform hover:scale-[1.02]">Log In</button>
                        <div class="relative py-2">
                            <div class="absolute inset-0 flex items-center">
                                <div class="w-full border-t border-slate-200 dark:border-slate-700"></div>
                            </div>
                            <div class="relative flex justify-center text-sm">
                                <span class="px-2 bg-white dark:bg-slate-900 text-slate-400">or</span>
                            </div>
                        </div>
                        <button class="w-full border border-slate-300 dark:border-slate-700 py-3 rounded-xl font-medium flex items-center justify-center space-x-2 hover:bg-slate-50 dark:hover:bg-slate-800 dark:text-white transition-colors">
                            <span>Continue with Google</span>
                        </button>
                    </div>
                `;
            }
        };

        window.handleCheckout = (e) => {
            e.preventDefault();
            clearCart();
            navigate('success');
        };

        window.setPartnerTab = (tab) => {
            state.partnerDashboardTab = tab;
            render();
        };

        window.toggleAddProperty = () => {
            state.isAddingProperty = !state.isAddingProperty;
            if (!state.isAddingProperty) {
                state.newProperty = { title: '', price: '', province: 'Harare', category: 'Lodge' };
            }
            render();
        };

        window.updateNewProperty = (field, value) => {
            state.newProperty[field] = value;
        };

        window.handleAddProperty = (e) => {
            e.preventDefault();
            addListing({
                id: Date.now(),
                title: state.newProperty.title,
                province: state.newProperty.province,
                location: state.newProperty.province,
                price: Number(state.newProperty.price),
                image: "https://images.unsplash.com/photo-1566073771259-6a8506099945?auto=format&fit=crop&q=80&w=1000",
                rating: 5,
                category: state.newProperty.category,
                type: 'stay',
                amenities: ['Wifi', 'Parking'],
                isOpen: true,
                description: "Newly listed property."
            });
            state.isAddingProperty = false;
            state.newProperty = { title: '', price: '', province: 'Harare', category: 'Lodge' };
            alert("Property published successfully! It is now visible on the Explore page.");
        };

        window.handleAITripPlanner = async (e) => {
            e.preventDefault();
            if (!state.aiTripPlannerQuery.trim()) return;
            await generateTripIdea(state.aiTripPlannerQuery);
        };

        window.scrollToAIPlanner = () => {
            const element = document.querySelector('#ai-planner-section');
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            }
        };

        window.toggleMobileMenu = () => {
            // Mobile menu implementation can be added here
            console.log('Mobile menu toggled');
        };

        // ====================
        // RENDER FUNCTION
        // ====================
        const render = () => {
            const root = document.getElementById('root');
            let content = '';
            
            switch(state.currentView) {
                case 'home':
                    content = HomePage();
                    break;
                case 'explore':
                    content = ExplorePage();
                    break;
                case 'listing-details':
                    content = ListingDetailsPage();
                    break;
                case 'cart':
                    content = CartPage();
                    break;
                case 'checkout':
                    content = CheckoutPage();
                    break;
                case 'success':
                    content = SuccessPage();
                    break;
                case 'dashboard':
                    content = PartnerDashboardPage();
                    break;
                default:
                    content = HomePage();
            }
            
            root.innerHTML = `
                ${state.currentView !== 'dashboard' ? Navbar() : ''}
                ${AuthModal()}
                ${content}
                ${state.currentView !== 'dashboard' && state.currentView !== 'success' ? Footer() : ''}
            `;
            
            // Reinitialize icons after render
            lucide.createIcons();
            
            // Set current date as default for checkin
            const today = new Date().toISOString().split('T')[0];
            const tomorrow = new Date(Date.now() + 86400000).toISOString().split('T')[0];
            const checkinInput = document.getElementById('checkin-date');
            const checkoutInput = document.getElementById('checkout-date');
            if (checkinInput && !checkinInput.value) checkinInput.value = today;
            if (checkoutInput && !checkoutInput.value) checkoutInput.value = tomorrow;
        };

        // ====================
        // INITIALIZATION
        // ====================
        document.addEventListener('DOMContentLoaded', () => {
            // Set initial theme
            document.documentElement.classList.toggle('dark', state.theme === 'dark');
            
            // Initial render
            render();
            
            // Add some demo cart items
            setTimeout(() => {
                if (state.cart.length === 0) {
                    addToCart(state.listings[0]);
                    addToCart(state.listings[1]);
                    render();
                }
            }, 1000);
        });

        // Expose functions to global scope
        window.navigate = navigate;
        window.setTheme = setTheme;
        window.setLanguage = setLanguage;
        window.addToCart = addToCart;
        window.removeFromCart = removeFromCart;
        window.clearCart = clearCart;
        window.toggleAuthModal = toggleAuthModal;
        window.scrollToAIPlanner = scrollToAIPlanner;
    </script>
</body>
</html>
